I tried in another git repo to make a good screeps routine. This is my PlanB.

Tasks Needed:
  - Spawner
  - Role Functions
    - Harvester
    - Patrol
  - Task Queues
  - Source Finder
    - Function for finding nearest source to go to
  - Source Queue

Pseudocode:


// Game.flags["Guard1"].pos.look()[1].type
